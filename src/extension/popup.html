<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Echo Meet Coach</title>
    <style>
      * { box-sizing: border-box; margin: 0; padding: 0; }
      body {
        width: 340px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: #f5f5f5;
        color: #111;
      }
      .wrap { padding: 14px; display: grid; gap: 10px; }
      .row { display: flex; align-items: center; gap: 10px; }
      .logo {
        width: 26px; height: 26px; border: 2px solid #000; border-radius: 6px;
        background: #ffd400; display: flex; align-items: center; justify-content: center;
        font-weight: 900;
      }
      h1 { font-size: 13px; font-weight: 900; letter-spacing: -0.2px; }
      .status { margin-left: auto; display: flex; align-items: center; gap: 6px; font-size: 11px; color: #444; }
      .dot { width: 8px; height: 8px; border-radius: 99px; background: #bbb; border: 1px solid #888; }
      .dot.active { background: #22c55e; border-color: #15803d; }

      label { font-size: 11px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.08em; color: #444; }
      input[type="text"] {
        width: 100%;
        padding: 8px 10px;
        border: 2px solid #000;
        border-radius: 8px;
        background: #fff;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', monospace;
        font-size: 12px;
      }
      .toggle {
        display: flex; align-items: center; gap: 10px;
        padding: 10px; border: 2px solid #000; border-radius: 10px; background: #fff;
      }
      .hint { font-size: 11px; color: #555; line-height: 1.35; }
      .btns { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
      button {
        padding: 9px 10px;
        border: 2px solid #000;
        border-radius: 10px;
        background: #fff;
        font-size: 12px;
        font-weight: 900;
        cursor: pointer;
      }
      button.primary { background: #000; color: #fff; }
      button:active { transform: translateY(1px); }
      .panel {
        border: 2px solid #000; border-radius: 10px; background: #fff; padding: 10px;
        display: grid; gap: 6px;
      }
      .kv { display: flex; justify-content: space-between; gap: 10px; font-size: 11px; }
      .kv .k { color: #444; font-weight: 800; text-transform: uppercase; letter-spacing: 0.06em; }
      .kv .v { color: #111; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', monospace; }
      .msg { display: none; padding: 8px 10px; border-radius: 10px; font-size: 11px; line-height: 1.35; }
      .msg.info { display: none; border: 1px solid #93c5fd; background: #eff6ff; color: #1e3a8a; }
      .msg.err { display: none; border: 1px solid #fecaca; background: #fef2f2; color: #7f1d1d; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="row">
        <div class="logo">E</div>
        <div>
          <h1>Meet Coach</h1>
          <div class="hint">Meet captions -> Dial1 tab</div>
        </div>
        <div class="status">
          <div class="dot" id="statusDot"></div>
          <span id="statusLabel">Idle</span>
        </div>
      </div>

      <div class="panel">
        <div style="display:grid; gap:6px;">
          <label for="dial1Url">Dial1 URL</label>
          <input id="dial1Url" type="text" placeholder="https://dial1.vercel.app/" />
          <div class="btns">
            <button id="useCurrentTab">Use current tab</button>
            <button id="openDial1" class="primary">Open Dial1</button>
          </div>
        </div>
      </div>

      <div class="toggle">
        <input id="enabled" type="checkbox" />
        <div style="display:grid; gap:2px;">
          <label for="enabled" style="text-transform:none; letter-spacing:0; font-size:12px;">Enabled</label>
          <div class="hint">Requires Google Meet captions (CC) enabled.</div>
        </div>
      </div>

      <div class="toggle">
        <input id="debug" type="checkbox" />
        <div style="display:grid; gap:2px;">
          <label for="debug" style="text-transform:none; letter-spacing:0; font-size:12px;">Debug logs</label>
          <div class="hint">Print caption detection details to Meet console.</div>
        </div>
      </div>

      <div class="msg info" id="info"></div>
      <div class="msg err" id="error"></div>

      <div class="btns">
        <button id="save" class="primary">Save</button>
        <button id="ping">Ping Dial1</button>
      </div>

      <div class="panel">
        <div class="kv">
          <div class="k">Meet last</div>
          <div class="v" id="meetLast">—</div>
        </div>
        <div class="kv">
          <div class="k">Dial1 tab</div>
          <div class="v" id="dial1Found">—</div>
        </div>
        <div class="kv">
          <div class="k">Forward last</div>
          <div class="v" id="fwdLast">—</div>
        </div>
        <div class="kv">
          <div class="k">Error</div>
          <div class="v" id="lastErr">—</div>
        </div>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>

